#!/bin/bash
set -e

GREEN='\\033[0;32m'
YELLOW='\\033[1;33m'
RED='\\033[0;31m'
NC='\\033[0m'

echo "üîç Running pre-commit checks..."

# Run ESLint
echo "${YELLOW}‚ñ∂ Running ESLint...${NC}"
pnpm lint

if [ $? -ne 0 ]; then
  echo ""
  echo "${RED}‚ùå Pre-commit check failed: Linting errors detected.${NC}"
  echo "${YELLOW}   Run 'pnpm lint:fix' to auto-fix issues.${NC}"
  exit 1
fi

# Run build check
echo "${YELLOW}üì¶ Checking if build passes...${NC}"
pnpm build

if [ $? -ne 0 ]; then
  echo ""
  echo "${RED}‚ùå Pre-commit check failed: Build errors detected.${NC}"
  echo "${YELLOW}   Please fix the errors before committing.${NC}"
  exit 1
fi

echo "${GREEN}‚úÖ Pre-commit checks passed!${NC}"
exit 0
